# node_modules, typescript, rollup

My first statement is going to sound crazy but true.

I have written several production JavaScript apps without using any 3rd party libraries or anything from the node_modules folder.

Recently I have been 'trying' to share my code with other internal teams via npm and Azure Artifacts and it was a struggle.

Mainly because rollup without using any node modules is extremely straight forward. because everything is pathed out.

But no one want to do imports like

```
// ugly import
import {x} from 'node_modules/my-nifty-component/src/index'
// better import
import {x} from 'my-nifty-component
```

My first big change is to move from typescript compile options from 'classic' to 'nodenext'.

The other big changes are:
Using @rollup/plugin-node-resolve to include other 3rd party libs and not treat them as external dependencies.

Using rollup-plugin-ts vs the other one, mainly so I can have one .d.ts file where the other one creates one d.ts per file.

```
// rolup.config.js
// import typescript from '@rollup/plugin-typescript'; //older lib I was using, but does not create one nice d.ts file 
import ts from 'rollup-plugin-ts';
import { nodeResolve } from '@rollup/plugin-node-resolve';

export default [
  {
    input: 'src/index.mts',
    output: {
      file: 'dist/browser/index.js',
      format: 'es',
      sourcemap: true
    },
    plugins: [
      ts({
        tsconfig: './tsconfig.browser.json'
      }),
      nodeResolve({ browser: true, preferBuiltins: true })
    ]
  }
```

I'm sure other details are missing, but what I've included should point you in the right direction if you are having this the same issue that I had. But not likely given most
projects do use 3rd party components.

